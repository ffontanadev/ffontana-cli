package {{packageName}};

import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.junit.jupiter.MockitoExtension;

import static org.junit.jupiter.api.Assertions.*;
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.Mockito.*;

/**
 * Test class for {{className}}
 * Generated by ff-cli
 */
@ExtendWith(MockitoExtension.class)
@DisplayName("{{className}} Tests")
public class {{className}}Test {

    @InjectMocks
    private {{className}} {{classNameCamel}};

    {{#each dependencies}}
    @Mock
    private {{this}};
    {{/each}}

    @BeforeEach
    void setUp() {
        // Setup test data
    }

    {{#each methods}}
    @Test
    @DisplayName("{{description}}")
    public void test{{pascalCase name}}() {
        // Given
        {{#each parameters}}
        {{type}} {{name}} = {{#if (eq type "String")}}"test"{{else}}null{{/if}};
        {{/each}}

        {{#if mockSetup}}
        {{mockSetup}}
        {{/if}}

        // When
        {{#if (ne returnType "void")}}
        {{returnType}} result = {{../classNameCamel}}.{{name}}({{#each parameters}}{{name}}{{#unless @last}}, {{/unless}}{{/each}});
        {{else}}
        {{../classNameCamel}}.{{name}}({{#each parameters}}{{name}}{{#unless @last}}, {{/unless}}{{/each}});
        {{/if}}

        // Then
        {{#if (ne returnType "void")}}
        assertNotNull(result);
        {{/if}}

        {{#if verifyMock}}
        {{verifyMock}}
        {{/if}}
    }

    {{#if throwsException}}
    @Test
    @DisplayName("{{description}} - Exception case")
    public void test{{pascalCase name}}_ThrowsException() {
        // Given
        {{#each parameters}}
        {{type}} {{name}} = null;
        {{/each}}

        // When & Then
        assertThrows({{throwsException}}.class, () -> {
            {{../classNameCamel}}.{{name}}({{#each parameters}}{{name}}{{#unless @last}}, {{/unless}}{{/each}});
        });
    }
    {{/if}}

    {{/each}}
}
